#!/bin/sh
# Native Pre-commit Hook (No Husky/Node required)

echo "üîç Running Local Linting (Core)..."

# Run fast lint (excluding heavy k8s parts to match CI Core Lint)
if command -v golangci-lint >/dev/null 2>&1; then
    golangci-lint run --exclude-dirs plugins/sentinel/cli,pkg/plugin/sdk --timeout=2m ./...
else
    echo "‚ö†Ô∏è golangci-lint not found. Skipping linting."
    exit 0
fi

if [ $? -ne 0 ]; then
    echo "‚ùå Linting completed with errors. Commit aborted."
    exit 1
fi

echo "‚úÖ Linting passed."
