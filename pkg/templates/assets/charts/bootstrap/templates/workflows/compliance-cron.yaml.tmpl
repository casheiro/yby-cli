apiVersion: argoproj.io/v1alpha1
kind: CronWorkflow
metadata:
  name: compliance-nightly
  namespace: argocd
  labels:
    project: {{ .ProjectName }}
    component: agents
    agent: compliance
spec:
  schedule: "0 2 * * *"
  timezone: "UTC"
  concurrencyPolicy: "Forbid"
  startingDeadlineSeconds: 60
  successfulJobsHistoryLimit: 3
  failedJobsHistoryLimit: 3
  workflowSpec:
    workflowTemplateRef:
      name: compliance-validate
