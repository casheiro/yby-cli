apiVersion: v1
kind: Service
metadata:
  name: git-webhook-eventsource-svc
  namespace: argo-events
  labels:
    app.kubernetes.io/name: git-webhook-eventsource-svc
    app.kubernetes.io/part-of: {{ .ProjectName }}
    component: events
spec:
  type: {{ "{{" }} .Values.events.webhook.serviceType | quote {{ "}}" }}
  ports:
    - name: http-webhook
      port: {{ "{{" }} .Values.events.webhook.port {{ "}}" }}
      targetPort: {{ "{{" }} .Values.events.webhook.port {{ "}}" }}
      {{ "{{" }}- if eq .Values.events.webhook.serviceType "NodePort" {{ "}}" }}
      nodePort: {{ "{{" }} .Values.events.webhook.nodePort {{ "}}" }}
      {{ "{{" }}- end {{ "}}" }}
  selector:
    eventsource-name: git-webhook
